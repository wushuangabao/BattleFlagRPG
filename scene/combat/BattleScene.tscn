[gd_scene load_steps=16 format=3 uid="uid://skvo00upkv2p"]

[ext_resource type="Script" uid="uid://cqv7uqecu6ns1" path="res://scene/combat/battle_scene.gd" id="1_1h8kx"]
[ext_resource type="Script" uid="uid://dbo03vf6xjbns" path="res://script/util/Camera3D_movable.gd" id="2_frx6r"]
[ext_resource type="Texture2D" uid="uid://bsa8v3hw3v3hv" path="res://asset/png/character/run_animation/run-6.png" id="2_ldyea"]
[ext_resource type="PackedScene" uid="uid://dp0j1m0xqlrck" path="res://scene/combat/test/canvas_layer.tscn" id="3_ldyea"]
[ext_resource type="Texture2D" uid="uid://c7fq7jg1cwp3x" path="res://asset/png/character/run_animation/run-1.png" id="4_c23fh"]
[ext_resource type="Script" uid="uid://6je7cd7a1ex8" path="res://script/entity/UnitBase3D.gd" id="4_fi3ub"]
[ext_resource type="Texture2D" uid="uid://c5pqk87gwxi3h" path="res://asset/png/character/run_animation/run-2.png" id="5_fi3ub"]
[ext_resource type="Texture2D" uid="uid://b6fwkcywgdhvb" path="res://asset/png/character/run_animation/run-3.png" id="6_7hkn4"]
[ext_resource type="Texture2D" uid="uid://cuw4afjr08td4" path="res://asset/png/character/run_animation/run-4.png" id="7_8xf8q"]
[ext_resource type="Texture2D" uid="uid://v68m4wnv38cf" path="res://asset/png/character/run_animation/run-5.png" id="8_4gioj"]
[ext_resource type="Texture2D" uid="uid://dlhg8vefde28j" path="res://asset/png/character/run_animation/run-7.png" id="10_hqoxg"]
[ext_resource type="Texture2D" uid="uid://jmxvx1vtb5y3" path="res://asset/png/character/run_animation/run-8.png" id="11_dwjhn"]
[ext_resource type="Script" uid="uid://c0hdhvpwb53u3" path="res://script/entity/AnimateBase3D.gd" id="13_7hkn4"]

[sub_resource type="PlaneMesh" id="PlaneMesh_wponv"]

[sub_resource type="SpriteFrames" id="SpriteFrames_5n8sn"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_c23fh")
}, {
"duration": 1.0,
"texture": ExtResource("5_fi3ub")
}, {
"duration": 1.0,
"texture": ExtResource("6_7hkn4")
}, {
"duration": 1.0,
"texture": ExtResource("7_8xf8q")
}, {
"duration": 1.0,
"texture": ExtResource("8_4gioj")
}, {
"duration": 1.0,
"texture": ExtResource("2_ldyea")
}, {
"duration": 1.0,
"texture": ExtResource("10_hqoxg")
}, {
"duration": 1.0,
"texture": ExtResource("11_dwjhn")
}],
"loop": true,
"name": &"run",
"speed": 5.0
}]

[node name="BattleScene" type="Node3D"]
script = ExtResource("1_1h8kx")
board_plane_path = NodePath("plane")
camera_path = NodePath("Camera3D")
subviewport_path = NodePath("SubViewport")
unit_path = NodePath("unit")
ground_layer_path = NodePath("SubViewport/CanvasLayer/TilemapRoot2D/Ground")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("follow_target")]
transform = Transform3D(1, 0, 0, 0, 0.695236, 0.718782, 0, -0.718782, 0.695236, 0, 1.80018, 1.01038)
fov = 45.0
near = 0.01
far = 2000.0
script = ExtResource("2_frx6r")
follow_target = NodePath("../unit")

[node name="light" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0.988517, 0)
light_energy = 1.1

[node name="plane" type="MeshInstance3D" parent="."]
mesh = SubResource("PlaneMesh_wponv")

[node name="SubViewport" type="SubViewport" parent="."]
size = Vector2i(1280, 720)
render_target_update_mode = 4

[node name="CanvasLayer" parent="SubViewport" instance=ExtResource("3_ldyea")]

[node name="unit" type="Marker3D" parent="." node_paths=PackedStringArray("anim")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.37758, 0.130008, 1.17767)
script = ExtResource("4_fi3ub")
anim = NodePath("anim")

[node name="anim" type="AnimatedSprite3D" parent="unit"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
offset = Vector2(0, 25)
pixel_size = 0.05
billboard = 1
render_priority = 1
sprite_frames = SubResource("SpriteFrames_5n8sn")
animation = &"run"
script = ExtResource("13_7hkn4")
